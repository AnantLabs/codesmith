/****** Object:  Procedure [dbo].[aposa_SetProductData]    Script Date: 04/17/2007 10:00:51 AM ******/
if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[aposa_SetProductData]') and OBJECTPROPERTY(id, N'IsProcedure') = 1)
drop procedure [dbo].[aposa_SetProductData]
GO
/*********************************************************************************************
 
 Created By: This code was generated by APOSA CodeSmith Domain Object Template.
 Date:    04/17/2007
 Time:    10:00 AM
 Version: 4.0.0.0

 Changes to this file may cause incorrect behavior and will be lost if the code is regenerated.

 Procedure Name: [dbo].[aposa_SetProductData]
 
 Description: Product Table
 
 Parameters: 
		@ProductID int OUTPUT,
		@ProductName varchar(50),
		@TransactionType int
       
--region RevisionLog
***************************************  Revision Log  ***************************************
 
Version   Date        Revised By       Description / WO#
--------  ----------  ---------------  -------------------------------------------------------
   
**********************************************************************************************/
--endregion
CREATE PROCEDURE [dbo].[aposa_SetProductData]
(
	@ProductID int OUTPUT,
	@ProductName varchar(50),
	@TransactionType int
)
AS

SET NOCOUNT ON
DECLARE @ROWCOUNT int
IF @TransactionType in (2,3,4)
BEGIN
	UPDATE [dbo].[Product] 
	SET    
		[ProductName] = @ProductName

	WHERE
		[ProductID] = @ProductID

	SET @ROWCOUNT = @@ROWCOUNT
	if(@@ERROR <> 0)
	BEGIN
		RAISERROR ('Could not update record.', 16, 1)  	
		RETURN @@ERROR
	END
	IF (@ROWCOUNT < 1)
	BEGIN
		
		INSERT INTO [dbo].[Product] 
		(
			[ProductName]

		) 
		VALUES 
		(
			@ProductName

		)
		SET @ProductID = SCOPE_IDENTITY()
		
		if(@@ERROR <> 0)
		BEGIN
			RAISERROR ('Could not insert record.', 16, 1)  
			RETURN @@ERROR
		END
	END
END
ELSE IF @TransactionType in (1)
BEGIN
	DELETE FROM [dbo].[Product] 	
	WHERE
		[ProductID] = @ProductID

	
	if(@@ERROR <> 0)
	BEGIN
		RAISERROR ('Could not update record.', 16, 1)  	
		RETURN @@ERROR
	END
	
END
ELSE 
	BEGIN
		RAISERROR ('Not a valid TransactionType. This value should be Delete = 1,Insert = 2,Update = 3,InsertUpdate = 4.', 16, 1)  
		RETURN -1	
	END
--region [dbo].[aposa_SetProductData]
------------------------------------------------------------------------------------------------------------------------");
-- Generated By:   cl1 using CodeSmith 4.0.0.0
-- Template:       UpdateInsertStoredProcedure.cst
-- Procedure Name: [dbo].[aposa_SetProductData]
-- Date Generated: Tuesday, April 17, 2007
------------------------------------------------------------------------------------------------------------------------");
--endregion

