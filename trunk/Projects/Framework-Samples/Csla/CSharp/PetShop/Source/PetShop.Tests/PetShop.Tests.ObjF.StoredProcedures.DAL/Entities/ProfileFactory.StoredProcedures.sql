--region Drop Existing Procedures

IF OBJECT_ID(N'[dbo].[CSLA_Profile_Insert]') IS NOT NULL
	DROP PROCEDURE [dbo].[CSLA_Profile_Insert]

IF OBJECT_ID(N'[dbo].[CSLA_Profile_Update]') IS NOT NULL
	DROP PROCEDURE [dbo].[CSLA_Profile_Update]

IF OBJECT_ID(N'[dbo].[CSLA_Profile_Delete]') IS NOT NULL
	DROP PROCEDURE [dbo].[CSLA_Profile_Delete]

IF OBJECT_ID(N'[dbo].[CSLA_Profile_Select]') IS NOT NULL
	DROP PROCEDURE [dbo].[CSLA_Profile_Select]

--endregion

GO

--region [dbo].[CSLA_Profile_Insert]

------------------------------------------------------------------------------------------------------------------------
-- Generated By:   Blake Niemyjski using CodeSmith: v5.2.1, CSLA Templates: v1.5.0.0, CSLA Framework: v3.8.0
-- Procedure Name: [dbo].[CSLA_Profile_Insert]
------------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [dbo].[CSLA_Profile_Insert]
	@p_Username varchar(256),
	@p_ApplicationName varchar(256),
	@p_IsAnonymous bit,
	@p_LastActivityDate datetime,
	@p_LastUpdatedDate datetime,
	@p_UniqueID int OUTPUT
AS

INSERT INTO [dbo].[Profiles] (
	[Username],
	[ApplicationName],
	[IsAnonymous],
	[LastActivityDate],
	[LastUpdatedDate]
) VALUES (
	@p_Username,
	@p_ApplicationName,
	@p_IsAnonymous,
	@p_LastActivityDate,
	@p_LastUpdatedDate
)

SET @p_UniqueID = SCOPE_IDENTITY()

--endregion

GO

--region [dbo].[CSLA_Profile_Update]

------------------------------------------------------------------------------------------------------------------------
-- Generated By:   Blake Niemyjski using CodeSmith: v5.2.1, CSLA Templates: v1.5.0.0, CSLA Framework: v3.8.0
-- Procedure Name: [dbo].[CSLA_Profile_Update]
------------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [dbo].[CSLA_Profile_Update]
	@p_UniqueID int,
	@p_Username varchar(256),
	@p_ApplicationName varchar(256),
	@p_IsAnonymous bit,
	@p_LastActivityDate datetime,
	@p_LastUpdatedDate datetime
AS

UPDATE [dbo].[Profiles] SET
	[Username] = @p_Username,
	[ApplicationName] = @p_ApplicationName,
	[IsAnonymous] = @p_IsAnonymous,
	[LastActivityDate] = @p_LastActivityDate,
	[LastUpdatedDate] = @p_LastUpdatedDate
WHERE
	[UniqueID] = @p_UniqueID

--endregion

GO

--region [dbo].[CSLA_Profile_Delete]

------------------------------------------------------------------------------------------------------------------------
-- Generated By:   Blake Niemyjski using CodeSmith: v5.2.1, CSLA Templates: v1.5.0.0, CSLA Framework: v3.8.0
-- Procedure Name: [dbo].[CSLA_Profile_Delete]
------------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [dbo].[CSLA_Profile_Delete]
	@p_UniqueID int
AS

DELETE FROM
    [dbo].[Profiles]
WHERE
	[UniqueID] = @p_UniqueID

--endregion

GO

--region [dbo].[CSLA_Profile_Select]

------------------------------------------------------------------------------------------------------------------------
-- Generated By:   Blake Niemyjski using CodeSmith: v5.2.1, CSLA Templates: v1.5.0.0, CSLA Framework: v3.8.0
-- Procedure Name: [dbo].[CSLA_Profile_Select]
------------------------------------------------------------------------------------------------------------------------

CREATE PROCEDURE [dbo].[CSLA_Profile_Select]
	@p_UniqueID int = NULL,
	@p_Username varchar(256) = NULL,
	@p_ApplicationName varchar(256) = NULL,
	@p_IsAnonymous bit = NULL,
	@p_LastActivityDate datetime = NULL,
	@p_LastUpdatedDate datetime = NULL
AS

SET TRANSACTION ISOLATION LEVEL READ COMMITTED

SELECT
	[UniqueID],
	[Username],
	[ApplicationName],
	[IsAnonymous],
	[LastActivityDate],
	[LastUpdatedDate]
FROM
    [dbo].[Profiles]
WHERE
	([UniqueID] = @p_UniqueID OR @p_UniqueID IS NULL)
	AND ([Username] = @p_Username OR @p_Username IS NULL)
	AND ([ApplicationName] = @p_ApplicationName OR @p_ApplicationName IS NULL)
	AND ([IsAnonymous] = @p_IsAnonymous OR @p_IsAnonymous IS NULL)
	AND ([LastActivityDate] = @p_LastActivityDate OR @p_LastActivityDate IS NULL)
	AND ([LastUpdatedDate] = @p_LastUpdatedDate OR @p_LastUpdatedDate IS NULL)

--endregion

GO

